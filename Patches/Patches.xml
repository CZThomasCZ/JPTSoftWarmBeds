<?xml version="1.0" encoding="utf-8" ?>
<Patch>

<!--to Stats_Pawns_General--> 
  <Operation Class="PatchOperationAdd">
    <xpath>*/StatDef[defName = "ComfyTemperatureMin"]/parts</xpath>
    <value>
      <li Class="SoftWarmBeds.StatPart_BedStatOffset">
        <stat>Bed_Insulation_Cold</stat>
        <subtract>true</subtract>
      </li>
    </value>
  </Operation>
  <Operation Class="PatchOperationAdd">
    <xpath>*/StatDef[defName = "ComfyTemperatureMax"]/parts</xpath>
    <value>
      <li Class="SoftWarmBeds.StatPart_BedStatOffset">
        <stat>Bed_Insulation_Heat</stat>
        <subtract>false</subtract>
      </li>
    </value>
  </Operation>

<!--to Stats_Building_Special-->
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationAdd">
        <xpath>*/StatDef[defName = "BedRestEffectiveness"]/parts</xpath>
        <value>
          <li Class="SoftWarmBeds.StatPart_BedStuff">
            <priority>100</priority>
            <additiveStat>Textile_Softness</additiveStat>
          </li>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>*/StatDef[defName = "BedRestEffectiveness"]/minValue</xpath>
        <value>
          <minValue>0.2</minValue>
        </value>
      </li>
    </operations>
  </Operation>

<!--to Stat_Basics_General-->
  <Operation Class="PatchOperationAdd">
    <xpath>*/StatDef[defName = "Comfort"]/parts</xpath>
      <value>
        <li Class="SoftWarmBeds.StatPart_BedStuff">
          <priority>100</priority>
          <additiveStat>Textile_Softness</additiveStat>
        </li>
      </value>
  </Operation>
  
<!--to Buildings_Furniture-->
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      
  <!--Function Extension-->      
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[@Name="BedBase"]/thingClass</xpath>
        <value>
          <thingClass>SoftWarmBeds.Building_SoftWarmBed</thingClass>
        </value>
      </li>    
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[@Name="BedBase"]</xpath>
        <value>
          <inspectorTabs>
            <li>SoftWarmBeds.ITab_Bedding</li>
          </inspectorTabs>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[@Name="BedBase"]</xpath>
        <value>
          <building>
            <fixedStorageSettings>
              <filter>
                <categories>
                  <li>Textiles</li>
                </categories>
              </filter>
            </fixedStorageSettings>
            <defaultStorageSettings>
              <filter>
                <categories>
                  <li>Textiles</li>
                </categories>
              </filter>
            </defaultStorageSettings>
          </building>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[@Name="BedBase"]</xpath>
        <value>
          <tickerType>Normal</tickerType>
        </value>
      </li>

  <!--Graphic Modifications-->
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "Bed"]/graphicData/texPath</xpath>
        <value>
          <texPath>Things/Building/Bed</texPath>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "DoubleBed"]/graphicData/texPath</xpath>
        <value>
          <texPath>Things/Building/DoubleBed</texPath>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "HospitalBed"]/graphicData/texPath</xpath>
        <value>
          <texPath>Things/Building/HospitalBed</texPath>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "RoyalBed"]/graphicData/texPath</xpath>
        <value>
          <texPath>Things/Building/RoyalBed</texPath>
        </value>
      </li>

  <!--ShowSleeperBody Settings-->
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[@ParentName="BedWithQualityBase" or @ParentName="ArtableBedBase"]/building/bed_showSleeperBody</xpath>
        <value>
          <bed_showSleeperBody>True</bed_showSleeperBody>
        </value>
      </li>
      
  <!--Beddings Settings-->
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "Bed"]/comps</xpath>
        <value>
          <li Class="SoftWarmBeds.CompProperties_MakeableBed">
            <blanketDef>SingleBlanket</blanketDef>
            <beddingDef>SingleBedding</beddingDef>
          </li>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "HospitalBed"]/comps</xpath>
        <value>
          <li Class="SoftWarmBeds.CompProperties_MakeableBed">
            <blanketDef>HospitalBlanket</blanketDef>
            <beddingDef>SingleBedding</beddingDef>
          </li>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "DoubleBed"]/comps</xpath>
        <value>
          <li Class="SoftWarmBeds.CompProperties_MakeableBed">
            <blanketDef>DoubleBlanket</blanketDef>
            <beddingDef>DoubleBedding</beddingDef>
          </li>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "RoyalBed"]/comps</xpath>
        <value>
          <li Class="SoftWarmBeds.CompProperties_MakeableBed">
            <blanketDef>RoyalBlanket</blanketDef>
            <beddingDef>DoubleBedding</beddingDef>
          </li>
        </value>
      </li>

      <!--BedRestEffectiveness Settings--> 
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "Bed" or defName = "DoubleBed" or defName = "HospitalBed"]/statBases/BedRestEffectiveness</xpath>
        <value>
          <BedRestEffectiveness>0.5</BedRestEffectiveness>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "RoyalBed"]/statBases/BedRestEffectiveness</xpath>
        <value>
          <BedRestEffectiveness>0.55</BedRestEffectiveness>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "Bedroll" or defName = "BedrollDouble"]/statBases/BedRestEffectiveness</xpath>
        <value>
          <BedRestEffectiveness>0.45</BedRestEffectiveness>
        </value>
      </li>

<!--Comfort Settings-->
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "Bed" or defName = "DoubleBed"]/statBases/Comfort</xpath>
        <value>
          <Comfort>0.25</Comfort>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "HospitalBed"]/statBases/Comfort</xpath>
        <value>
          <Comfort>0.3</Comfort>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "RoyalBed"]/statBases/Comfort</xpath>
        <value>
          <Comfort>0.4</Comfort>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "Bedroll" or defName = "BedrollDouble"]/statBases/Comfort</xpath>
        <value>
          <Comfort>0.18</Comfort>
        </value>
      </li>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName = "SleepingSpot" or defName = "DoubleSleepingSpot"]/statBases/Comfort</xpath>
        <value>
          <Comfort>0</Comfort>
        </value>
      </li>

<!--Insulation Settings-->
<!--      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[@ParentName="BedWithQualityBase" or @ParentName="ArtableBedBase"]/statBases</xpath>
        <value>
          <BedStuffEffectMultiplierInsulation_Heat>0.2</BedStuffEffectMultiplierInsulation_Heat>
        </value>
      </li>-->
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "Bedroll" or defName = "BedrollDouble"]/statBases</xpath>
        <value>
          <BedStuffEffectMultiplierInsulation_Cold>0.2</BedStuffEffectMultiplierInsulation_Cold>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "Bed" or defName = "DoubleBed" or defName= "HospitalBed"]/statBases</xpath>
        <value>
          <BedStuffEffectMultiplierInsulation_Cold>0.35</BedStuffEffectMultiplierInsulation_Cold>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "RoyalBed"]/statBases</xpath>
        <value>
          <BedStuffEffectMultiplierInsulation_Cold>0.5</BedStuffEffectMultiplierInsulation_Cold>
        </value>
      </li>

<!--End to Buildings_Furniture-->      
    </operations>
  </Operation>
</Patch>